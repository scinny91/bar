{% extends 'bar/base.html' %}
{% load dict_extras %}
{% block content %}

<div class="d-flex flex-column align-items-center">
  <h2 class="mb-4">Riepilogo Ordini</h2>
</div>

<div class="d-flex flex-column align-items-center">

  {% for stato in totali %}
    <div class="card text-center shadow-sm mb-3" style="width: 24rem;">
      <div class="card-header text-white
        {% if stato.nome == 'In Attesa' %} bg-warning
        {% elif stato.nome == 'In Preparazione' %} bg-info
        {% elif stato.nome == 'Parzialmente evaso' %} bg-primary
        {% elif stato.nome == 'Completato' %} bg-success
        {% else %} bg-secondary {% endif %}
      ">
        {{ stato.nome }}
      </div>
      <div class="card-body">
        {% for categoria in stato.categorie %}
          <h6>{{ categoria.nome }}</h6>
          <ul class="list-unstyled small">
            {% for sottocategoria, valori in categoria.sottocategorie.items %}
              {% if valori.quantità > 0 %}
                <li>
                  <strong>{{ sottocategoria }}</strong> –
                  {{ valori.quantità }} pezzi,
                  <span class="fw-bold text-success">€{{ valori.totale|floatformat:2 }}</span>
                </li>
              {% endif %}
            {% endfor %}
          </ul>
        {% endfor %}
      </div>
    </div>

    {% if not forloop.last %}
      <div class="my-2">
        <i class="fa-solid fa-arrow-down fa-2x text-secondary"></i>
      </div>
    {% endif %}
  {% endfor %}

</div>

{% endblock %}